!function(){function config($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"/ng/home.html",controller:"HomeCtrl",controllerAs:"$vm"}).when("/trip",{templateUrl:"/ng/trip.html",controller:"TripCtrl",controllerAs:"$vm",resolve:{tripQuery:["$route","wlTripQuery",function($route,wlTripQuery){if($route.current.params.startDate&&$route.current.params.endDate&&$route.current.params.theme){var tripInfo={startDate:new Date($route.current.params.startDate),endDate:new Date($route.current.params.endDate),theme:$route.current.params.theme.toUpperCase(),budget:$route.current.params.budget||1e3};wlTripQuery.setTripInfo(tripInfo)}return wlTripQuery.get()}]}}).when("/trip/details/:tripIndex",{templateUrl:"/ng/details.html",controller:"DetailCtrl",controllerAs:"$vm",resolve:{tripDetails:["$route","wlTripQuery",function($route,wlTripQuery){var index=$route.current.params.tripIndex;return wlTripQuery.get(index)}]}}).otherwise("/"),$locationProvider.html5Mode(!0)}function setup(){$.material.init()}angular.module("WanderlustApp",["ngRoute","ngAnimate","ui.bootstrap"]).config(config).run(setup),config.$inject=["$routeProvider","$locationProvider"]}(),function(){"use strict";function DetailCtrl($routeParams,tripDetails){var $vm=this;$vm.index=$routeParams.tripIndex,$vm.details=tripDetails}angular.module("WanderlustApp").controller("DetailCtrl",DetailCtrl),DetailCtrl.$inject=["$routeParams","tripDetails"]}(),function(){"use strict";function HomeCtrl($location,wlTripQuery){function submitForm(){wlTripQuery.setTripInfo($vm.tripInfo),$location.path("/trip").search($vm.tripInfo)}function _getNextDate(date){return new Date(date.setDate(date.getDate()+1))}var $vm=this,tomorrow=_getNextDate(new Date),dayAfterNext=_getNextDate(new Date(tomorrow));$vm.datepickerConfig={minDate:new Date},$vm.tripInfo={startDate:tomorrow,endDate:dayAfterNext,theme:"",budget:"1000"},$vm.themeList=[{name:"Beach",key:"BEACH"},{name:"Disney",key:"DISNEY"},{name:"Gambling",key:"GAMBLING"},{name:"Historic",key:"HISTORIC"},{name:"Mountains",key:"MOUNTAINS"},{name:"National-Parks",key:"NATIONAL-PARKS"},{name:"Outdoors",key:"OUTDOORS"},{name:"Romantic",key:"ROMANTIC"},{name:"Shopping",key:"SHOPPING"},{name:"Skiing",key:"SKIING"},{name:"Theme-Park",key:"THEME-PARK"},{name:"Caribbean",key:"CARIBBEAN"}],$vm.submitForm=submitForm}angular.module("WanderlustApp").controller("HomeCtrl",HomeCtrl),HomeCtrl.$inject=["$location","wlTripQuery"]}(),function(){"use strict";function TripCtrl(tripQuery){function init(){$vm.tripList=tripQuery.data.FareInfo,$vm.tripInfo={startDate:new Date($vm.tripList[0].DepartureDateTime),endDate:new Date($vm.tripList[0].ReturnDateTime),theme:$vm.tripList[0].Theme}}var $vm=this;$vm.tripList=[],$vm.tripInfo={},init()}angular.module("WanderlustApp").controller("TripCtrl",TripCtrl),TripCtrl.$inject=["tripQuery"]}(),function(){"use strict";function wlTripQueryFactory($http,$q,$timeout){function get(){return _POST(_tripInfo)}function getTripInfo(){return _tripInfo}function setTripInfo(ti){_tripInfo=ti}function _POST(params){return $http.post(endPoint,params).success(function(data){return console.log("get stuff!",data),data})}{var endPoint="/dest_finder",_tripInfo={};({theme:"THEME-PARK",departureDate:new Date("10/01/2015"),arrivalDate:new Date("10/04/2015"),trips:[{index:1,city:"Los Angeles",out:{airline:"Virgin America",departureIATA:"SFO",arrivalIATA:"LAX",departureDate:new Date("10/01/2015 09:00"),arrivalDate:new Date("10/01/2015 10:30")},"in":{airline:"Virgin America",departureIATA:"LAX",arrivalIATA:"SFO",departureDate:new Date("10/04/2015 20:25"),arrivalDate:new Date("10/04/2015 22:00")}},{index:2,city:"Boston",out:{airline:"American Airlines",departureIATA:"SFO",arrivalIATA:"BOS",departureDate:new Date("10/01/2015 11:00"),arrivalDate:new Date("10/01/2015 12:30")},"in":{airline:"American Airlines",departureIATA:"BOS",arrivalIATA:"SFO",departureDate:new Date("10/04/2015 22:25"),arrivalDate:new Date("10/04/2015 23:50")}}]})}return{get:get,getTripInfo:getTripInfo,setTripInfo:setTripInfo}}angular.module("WanderlustApp").factory("wlTripQuery",wlTripQueryFactory),wlTripQueryFactory.$inject=["$http","$q","$timeout"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tYWluLmpzIiwid2FuZGVybHVzdC5qcyIsImNvbnRyb2xsZXJzL2RldGFpbC5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvaG9tZS5jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvdHJpcC5jb250cm9sbGVyLmpzIiwic2VydmljZXMvd2wtdHJpcC1xdWVyeS5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsInRyaXBRdWVyeSIsIiRyb3V0ZSIsIndsVHJpcFF1ZXJ5IiwiY3VycmVudCIsInBhcmFtcyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJ0aGVtZSIsInRyaXBJbmZvIiwiRGF0ZSIsInRvVXBwZXJDYXNlIiwiYnVkZ2V0Iiwic2V0VHJpcEluZm8iLCJnZXQiLCJ0cmlwRGV0YWlscyIsImluZGV4IiwidHJpcEluZGV4Iiwib3RoZXJ3aXNlIiwiaHRtbDVNb2RlIiwic2V0dXAiLCIkIiwibWF0ZXJpYWwiLCJpbml0IiwiYW5ndWxhciIsIm1vZHVsZSIsInJ1biIsIiRpbmplY3QiLCJEZXRhaWxDdHJsIiwiJHJvdXRlUGFyYW1zIiwiJHZtIiwidGhpcyIsImRldGFpbHMiLCJIb21lQ3RybCIsIiRsb2NhdGlvbiIsInN1Ym1pdEZvcm0iLCJwYXRoIiwic2VhcmNoIiwiX2dldE5leHREYXRlIiwiZGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwidG9tb3Jyb3ciLCJkYXlBZnRlck5leHQiLCJkYXRlcGlja2VyQ29uZmlnIiwibWluRGF0ZSIsInRoZW1lTGlzdCIsIm5hbWUiLCJrZXkiLCJUcmlwQ3RybCIsInRyaXBMaXN0IiwiZGF0YSIsIkZhcmVJbmZvIiwiRGVwYXJ0dXJlRGF0ZVRpbWUiLCJSZXR1cm5EYXRlVGltZSIsIlRoZW1lIiwid2xUcmlwUXVlcnlGYWN0b3J5IiwiJGh0dHAiLCIkcSIsIiR0aW1lb3V0IiwiX1BPU1QiLCJfdHJpcEluZm8iLCJnZXRUcmlwSW5mbyIsInRpIiwicG9zdCIsImVuZFBvaW50Iiwic3VjY2VzcyIsImNvbnNvbGUiLCJsb2ciLCJkZXBhcnR1cmVEYXRlIiwiYXJyaXZhbERhdGUiLCJ0cmlwcyIsImNpdHkiLCJvdXQiLCJhaXJsaW5lIiwiZGVwYXJ0dXJlSUFUQSIsImFycml2YWxJQVRBIiwiaW4iLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQVFJLFFBQVNBLFFBQVFDLGVBQWdCQyxtQkFFN0JELGVBQ0tFLEtBQUssS0FDRkMsWUFBYSxnQkFDYkMsV0FBWSxXQUNaQyxhQUFjLFFBRWpCSCxLQUFLLFNBQ0ZDLFlBQWEsZ0JBQ2JDLFdBQVksV0FDWkMsYUFBYyxNQUNkQyxTQUNJQyxXQUFBLFNBQUEsY0FBVyxTQUFVQyxPQUFRQyxhQUN6QixHQUFJRCxPQUFPRSxRQUFRQyxPQUFPQyxXQUFhSixPQUFPRSxRQUFRQyxPQUFPRSxTQUFXTCxPQUFPRSxRQUFRQyxPQUFPRyxNQUFPLENBQ2pHLEdBQUlDLFdBQ0FILFVBQVcsR0FBSUksTUFBS1IsT0FBT0UsUUFBUUMsT0FBT0MsV0FDMUNDLFFBQVMsR0FBSUcsTUFBS1IsT0FBT0UsUUFBUUMsT0FBT0UsU0FDeENDLE1BQU9OLE9BQU9FLFFBQVFDLE9BQU9HLE1BQU1HLGNBQ25DQyxPQUFTVixPQUFPRSxRQUFRQyxPQUFPTyxRQUFVLElBRzdDVCxhQUFZVSxZQUFZSixVQUc1QixNQUFPTixhQUFZVyxXQUk5QmxCLEtBQUssNEJBQ0ZDLFlBQWEsbUJBQ2JDLFdBQVksYUFDWkMsYUFBYyxNQUNkQyxTQUNJZSxhQUFBLFNBQUEsY0FBYSxTQUFVYixPQUFRQyxhQUMzQixHQUFJYSxPQUFRZCxPQUFPRSxRQUFRQyxPQUFPWSxTQUNsQyxPQUFPZCxhQUFZVyxJQUFJRSxZQUlsQ0UsVUFBVSxLQUVmdkIsa0JBQWtCd0IsV0FBVSxHQUdoQyxRQUFTQyxTQUNMQyxFQUFFQyxTQUFTQyxPQXJE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ZSxHQUFJM0QsTUFBSyxvQkFDeEI0RCxZQUFhLEdBQUk1RCxNQUFLLHVCQUkxQk0sTUFBTyxFQUNQd0QsS0FBTSxTQUNOQyxLQUNJQyxRQUFTLG9CQUNUQyxjQUFlLE1BQ2ZDLFlBQWEsTUFDYlAsY0FBZSxHQUFJM0QsTUFBSyxvQkFDeEI0RCxZQUFhLEdBQUk1RCxNQUFLLHFCQUUxQm1FLE1BQ0lILFFBQVMsb0JBQ1RDLGNBQWUsTUFDZkMsWUFBYSxNQUNiUCxjQUFlLEdBQUkzRCxNQUFLLG9CQUN4QjRELFlBQWEsR0FBSTVELE1BQUsseUJBT3RDLE9BQ0lJLElBQUtBLElBQ0xnRCxZQUFhQSxZQUNiakQsWUFBYUEsYUF2RHJCVyxRQUFRQyxPQUFPLGlCQUNWcUQsUUFBUSxjQUFldEIsb0JKa1A1QkEsbUJBQW1CN0IsU0FBVyxRQUFTLEtBQU0iLCJmaWxlIjoid2FuZGVybHVzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ1dhbmRlcmx1c3RBcHAnLCBbXG4gICAgICAgICduZ1JvdXRlJyxcbiAgICAgICAgJ25nQW5pbWF0ZScsXG4gICAgICAgICd1aS5ib290c3RyYXAnXG4gICAgXSkuY29uZmlnKGNvbmZpZykucnVuKHNldHVwKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIGNvbmZpZyAoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC53aGVuKCcvJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL25nL2hvbWUuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDdHJsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICckdm0nXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oJy90cmlwJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL25nL3RyaXAuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RyaXBDdHJsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICckdm0nLFxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgdHJpcFF1ZXJ5OiBmdW5jdGlvbiAoJHJvdXRlLCB3bFRyaXBRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRyb3V0ZS5jdXJyZW50LnBhcmFtcy5zdGFydERhdGUgJiYgJHJvdXRlLmN1cnJlbnQucGFyYW1zLmVuZERhdGUgJiYgJHJvdXRlLmN1cnJlbnQucGFyYW1zLnRoZW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyaXBJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydERhdGU6IG5ldyBEYXRlKCRyb3V0ZS5jdXJyZW50LnBhcmFtcy5zdGFydERhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmREYXRlOiBuZXcgRGF0ZSgkcm91dGUuY3VycmVudC5wYXJhbXMuZW5kRGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiAkcm91dGUuY3VycmVudC5wYXJhbXMudGhlbWUudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVkZ2V0OiAgJHJvdXRlLmN1cnJlbnQucGFyYW1zLmJ1ZGdldCB8fCAxMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3bFRyaXBRdWVyeS5zZXRUcmlwSW5mbyh0cmlwSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3bFRyaXBRdWVyeS5nZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbignL3RyaXAvZGV0YWlscy86dHJpcEluZGV4Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL25nL2RldGFpbHMuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0RldGFpbEN0cmwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJyR2bScsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICB0cmlwRGV0YWlsczogZnVuY3Rpb24gKCRyb3V0ZSwgd2xUcmlwUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9ICRyb3V0ZS5jdXJyZW50LnBhcmFtcy50cmlwSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2xUcmlwUXVlcnkuZ2V0KGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub3RoZXJ3aXNlKFwiL1wiKTtcblxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0dXAgKCkge1xuICAgICAgICAkLm1hdGVyaWFsLmluaXQoKTtcbiAgICB9XG59KSgpO1xuIixudWxsLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdXYW5kZXJsdXN0QXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0RldGFpbEN0cmwnLCBEZXRhaWxDdHJsKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIERldGFpbEN0cmwgKCRyb3V0ZVBhcmFtcywgdHJpcERldGFpbHMpIHtcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICAgIHZhciAkdm0gPSB0aGlzO1xuXG4gICAgICAgICR2bS5pbmRleCA9ICRyb3V0ZVBhcmFtcy50cmlwSW5kZXg7XG4gICAgICAgICR2bS5kZXRhaWxzID0gdHJpcERldGFpbHM7XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ1dhbmRlcmx1c3RBcHAnKVxuICAgICAgICAuY29udHJvbGxlcignSG9tZUN0cmwnLEhvbWVDdHJsKTtcblxuICAgIC8qIEBuZ0luamVjdCAqL1xuICAgIGZ1bmN0aW9uIEhvbWVDdHJsICgkbG9jYXRpb24sIHdsVHJpcFF1ZXJ5KSB7XG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgICB2YXIgJHZtID0gdGhpcyxcbiAgICAgICAgICAgIHRvbW9ycm93ID0gX2dldE5leHREYXRlKG5ldyBEYXRlKCkpLFxuICAgICAgICAgICAgZGF5QWZ0ZXJOZXh0ID0gX2dldE5leHREYXRlKG5ldyBEYXRlKHRvbW9ycm93KSk7XG5cbiAgICAgICAgJHZtLmRhdGVwaWNrZXJDb25maWcgPSB7XG4gICAgICAgICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9O1xuXG4gICAgICAgICR2bS50cmlwSW5mbyA9IHtcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogdG9tb3Jyb3csXG4gICAgICAgICAgICBlbmREYXRlOiBkYXlBZnRlck5leHQsXG4gICAgICAgICAgICB0aGVtZTogJycsXG4gICAgICAgICAgICBidWRnZXQ6ICcxMDAwJyxcbiAgICAgICAgfTtcblxuICAgICAgICAkdm0udGhlbWVMaXN0ID0gW1xuICAgICAgICAgICAgeyBuYW1lOiAnQmVhY2gnLCBrZXk6ICdCRUFDSCcgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0Rpc25leScsIGtleTogJ0RJU05FWScgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0dhbWJsaW5nJywga2V5OiAnR0FNQkxJTkcnIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdIaXN0b3JpYycsIGtleTogJ0hJU1RPUklDJyB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnTW91bnRhaW5zJywga2V5OiAnTU9VTlRBSU5TJyB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnTmF0aW9uYWwtUGFya3MnLCBrZXk6ICdOQVRJT05BTC1QQVJLUycgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ091dGRvb3JzJywga2V5OiAnT1VURE9PUlMnIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdSb21hbnRpYycsIGtleTogJ1JPTUFOVElDJyB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnU2hvcHBpbmcnLCBrZXk6ICdTSE9QUElORycgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ1NraWluZycsIGtleTogJ1NLSUlORycgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ1RoZW1lLVBhcmsnLCBrZXk6ICdUSEVNRS1QQVJLJyB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnQ2FyaWJiZWFuJywga2V5OiAnQ0FSSUJCRUFOJyB9XG4gICAgICAgIF07XG5cbiAgICAgICAgJHZtLnN1Ym1pdEZvcm0gPSBzdWJtaXRGb3JtO1xuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgZnVuY3Rpb24gc3VibWl0Rm9ybSAoKSB7XG4gICAgICAgICAgICB3bFRyaXBRdWVyeS5zZXRUcmlwSW5mbygkdm0udHJpcEluZm8pO1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy90cmlwJykuc2VhcmNoKCR2bS50cmlwSW5mbyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfZ2V0TmV4dERhdGUgKGRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAxKSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnV2FuZGVybHVzdEFwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdUcmlwQ3RybCcsVHJpcEN0cmwpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gVHJpcEN0cmwgKHRyaXBRdWVyeSkge1xuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgICAgdmFyICR2bSA9IHRoaXM7XG4gICAgICAgICR2bS50cmlwTGlzdCA9IFtdO1xuICAgICAgICAkdm0udHJpcEluZm8gPSB7fTtcblxuICAgICAgICBpbml0KCk7XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBmdW5jdGlvbiBpbml0ICgpIHtcbiAgICAgICAgICAgICR2bS50cmlwTGlzdCA9IHRyaXBRdWVyeS5kYXRhLkZhcmVJbmZvO1xuXG4gICAgICAgICAgICAkdm0udHJpcEluZm8gPSB7XG4gICAgICAgICAgICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZSgkdm0udHJpcExpc3RbMF0uRGVwYXJ0dXJlRGF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgIGVuZERhdGU6IG5ldyBEYXRlKCR2bS50cmlwTGlzdFswXS5SZXR1cm5EYXRlVGltZSksXG4gICAgICAgICAgICAgICAgdGhlbWU6ICR2bS50cmlwTGlzdFswXS5UaGVtZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ1dhbmRlcmx1c3RBcHAnKVxuICAgICAgICAuZmFjdG9yeSgnd2xUcmlwUXVlcnknLCB3bFRyaXBRdWVyeUZhY3RvcnkpO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gd2xUcmlwUXVlcnlGYWN0b3J5ICgkaHR0cCwgJHEsICR0aW1lb3V0KSB7XG4gICAgICAgIHZhciBlbmRQb2ludCA9ICcvZGVzdF9maW5kZXInO1xuICAgICAgICB2YXIgX3RyaXBJbmZvID0ge307XG4gICAgICAgIHZhciBfbW9ja0RhdGEgPSB7XG4gICAgICAgICAgICB0aGVtZTogJ1RIRU1FLVBBUksnLFxuICAgICAgICAgICAgZGVwYXJ0dXJlRGF0ZTogbmV3IERhdGUoJzEwLzAxLzIwMTUnKSxcbiAgICAgICAgICAgIGFycml2YWxEYXRlOiBuZXcgRGF0ZSgnMTAvMDQvMjAxNScpLFxuICAgICAgICAgICAgdHJpcHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiAxLFxuICAgICAgICAgICAgICAgICAgICBjaXR5OiAnTG9zIEFuZ2VsZXMnLFxuICAgICAgICAgICAgICAgICAgICBvdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFpcmxpbmU6ICdWaXJnaW4gQW1lcmljYScsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBhcnR1cmVJQVRBOiAnU0ZPJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycml2YWxJQVRBOiAnTEFYJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGFydHVyZURhdGU6IG5ldyBEYXRlKCcxMC8wMS8yMDE1IDA5OjAwJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJpdmFsRGF0ZTogbmV3IERhdGUoJzEwLzAxLzIwMTUgMTA6MzAnKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWlybGluZTogJ1ZpcmdpbiBBbWVyaWNhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGFydHVyZUlBVEE6ICdMQVgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyaXZhbElBVEE6ICdTRk8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVwYXJ0dXJlRGF0ZTogbmV3IERhdGUoJzEwLzA0LzIwMTUgMjA6MjUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycml2YWxEYXRlOiBuZXcgRGF0ZSgnMTAvMDQvMjAxNSAyMjowMCcpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IDIsXG4gICAgICAgICAgICAgICAgICAgIGNpdHk6ICdCb3N0b24nLFxuICAgICAgICAgICAgICAgICAgICBvdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFpcmxpbmU6ICdBbWVyaWNhbiBBaXJsaW5lcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBhcnR1cmVJQVRBOiAnU0ZPJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycml2YWxJQVRBOiAnQk9TJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGFydHVyZURhdGU6IG5ldyBEYXRlKCcxMC8wMS8yMDE1IDExOjAwJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJpdmFsRGF0ZTogbmV3IERhdGUoJzEwLzAxLzIwMTUgMTI6MzAnKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWlybGluZTogJ0FtZXJpY2FuIEFpcmxpbmVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGFydHVyZUlBVEE6ICdCT1MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyaXZhbElBVEE6ICdTRk8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVwYXJ0dXJlRGF0ZTogbmV3IERhdGUoJzEwLzA0LzIwMTUgMjI6MjUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycml2YWxEYXRlOiBuZXcgRGF0ZSgnMTAvMDQvMjAxNSAyMzo1MCcpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH07XG5cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0OiBnZXQsXG4gICAgICAgICAgICBnZXRUcmlwSW5mbzogZ2V0VHJpcEluZm8sXG4gICAgICAgICAgICBzZXRUcmlwSW5mbzogc2V0VHJpcEluZm9cbiAgICAgICAgfTtcblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldCAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX1BPU1QoX3RyaXBJbmZvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRyaXBJbmZvICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdHJpcEluZm87XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRUcmlwSW5mbyAodGkpIHtcbiAgICAgICAgICAgIF90cmlwSW5mbyA9IHRpO1xuICAgICAgICB9XG5cblxuICAgICAgICBmdW5jdGlvbiBfUE9TVCAocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChlbmRQb2ludCwgcGFyYW1zKVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXQgc3R1ZmYhJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==